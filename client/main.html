<!--
	Nicole Bassen and Kimberly Praxel
	Guess Who? Meteor site
-->

<head>
  <title>Guess Who?</title>
  
  <!-- Google fonts -->
  <link href='https://fonts.googleapis.com/css?family=Raleway:600' rel='stylesheet' type='text/css'>
  
  <!-- jQuery script -->
  <script src="jquery-1.12.2.min.js"></script>


    <!-- font awesome icons -->
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
    <!-- w3schools styles -->
  <link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
</head>


<!-- 	TEMPLATES 	  -->


<!--*********************
		NAVIGATION 
**********************-->

<template name="navigation">
  <nav class='navbar navbar-default' id="navigationBar">
      <ul class='nav navbar-nav'>
        <li> <a class='navbar-brand navOption' id="mainTitle" href='/'> Guess Who? </a> </li>
        <li> <a class='navOption' href='#'> Find Friends </a> </li>
        <li> <a class='navOption' href='/game'> Play Guess Who? </a> </li>
		<li> <a class='navOption' href='/instructions'> Instructions </a> </li>
		<li> <a class='navOption' href='/highscores'> High Scores </a> </li>
      </ul>
	  
      <div class='collapse navbar-collapse' id='navigation'>
        <ul class='nav navbar-nav navbar-right' id="loginButton">
            {{> loginButtons }}
        </ul>
      </div>
  </nav>
</template>


<!--*********************
		MAIN PANEL 
**********************-->

<template name="mainbox">
    <div class="panel panel-default" id="mainbox">
        <div class="panel-body">
            
            <!-- photo+stats div -->
            <div class="col-xs-3">
            	<!-- photo div -->
            	<div class="row">
                    <div class="text-center">
                    <img src="{{myTile.frontImage}}" id="myTile">
                    <h4 class="text-center">{{myTile.name}}</h4><br><br>
                    </div>
            	</div><!-- /photo div -->
            
            	<!-- stats div -->
            	<div class="row">
            		<h4 class="text-center userDisplayName">{{currentUser.username}}</h4>
                    <p>Wins: {{currentUser.profile.wins}}<br />
                    Losses: {{currentUser.profile.losses}}</p>
                    <h4 class="text-center userDisplayName">{{opponent.username}}</h4>
                    <p>Wins: {{opponent.profile.wins}}<br />
                    Losses: {{opponent.profile.losses}}</p>
                </div> <!-- /stats div -->
            </div> <!-- /photo+stats div -->


            <!-- tiles div -->
            <div class="col-lg-9 col-md-9 col-sm-9" id="playerboard">

            	<div class="row text-center">
            		<h4>{{gameMessage}}</h4>
            	</div>
            	<!-- row #1 -->
            	<div class="row" id="playerTiles">
					{{#each firstRow}}
                	<div class="col-lg-2 col-md-2 col-sm-2">
                    	<div class="box" id="player-row">
                            <div class="flip-container">
                                <div class="flipper" onclick="{{flipTile}}">
                                    <div class="front">
                                        <img src="{{this.frontImage}}" class="playerTile" id="{{this.id}}">
                                        <p>{{this.name}}</p>
                                    </div>
                                    <div class="back">
                                        <img src="{{this.backImage}}" class="playerTile" id="{{this.id}}">
                                        <p>{{this.name}}</p>
                                    </div>
                                </div>
                            </div>
                    	</div>
                	</div>
                	{{/each}}
                </div> <!-- /row #1 -->
                
                <!-- row #2 -->
            	<div class="row" id="playerTiles">
					{{#each secondRow}}
                        <div class="col-lg-2 col-md-2 col-sm-2">
                            <div class="box" id="player-row">
                                <div class="flip-container">
                                    <div class="flipper" onclick="{{flipTile}}">
                                        <div class="front">
                                        <img src="{{this.frontImage}}" class="playerTile" id="{{this.id}}">
                                        <p>{{this.name}}</p>
                                    </div>
                                    <div class="back">
                                        <img src="{{this.backImage}}" class="playerTile" id="{{this.id}}">
                                        <p>{{this.name}}</p>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                	{{/each}}
                </div> <!-- /row #2 -->
                
                <!-- row #3 -->
            	<div class="row" id="playerTiles">
					{{#each thirdRow}}
                        <div class="col-lg-2 col-md-2 col-sm-2">
                            <div class="box" id="player-row">
                                <div class="flip-container">
                                    <div class="flipper" onclick="{{flipTile}}">
                                        <div class="front">
                                        <img src="{{this.frontImage}}" class="playerTile" id="{{this.id}}">
                                        <p>{{this.name}}</p>
                                    </div>
                                    <div class="back">
                                        <img src="{{this.backImage}}" class="playerTile"  id="{{this.id}}">
                                        <p>{{this.name}}</p>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                	{{/each}}
                </div> <!-- /row #3 -->

            </div><!-- /tiles div -->
        </div>
    </div>
</template>


<!--*********************
	   SEND MESSAGE
**********************-->

<template name="addMessageForm">
	<!--<div class="panel panel-default" id="chatInputPanel">-->
        <form class="newMessage" id="newMessage">
            <div class="form-group">
                <input type="text" id="messageText" class="form-control" placeholder="Type a message">
            </div>
        </form>
    <!--</div>-->
</template>


<!--*********************
	 DISPLAY MESSAGES
**********************-->

<template name="messageList">
    <div class="panel panel-default" id="chatPanel">
    <ul class="list-group">
    	<!-- Display messages stored in the database -->
        {{#each allMessages}}
            <span class="time"><small>{{time}}</small></span>
            <b><span class="userDisplayName">{{this.name}}</span></b>: {{this.messageText}}<br>
        {{/each}}
    </ul>
        </div>
</template>


<!--*********************
	 OPPONENT BOARD
**********************-->

<template name="opponentBoard">
	<div class="panel panel-default" id="opponentBoard">
		<h3 class="text-center">Opponent Board</h3>
        <!-- row #1 -->
        <div class="row">
            {{#each firstRow}}
                <div class="col-lg-2 col-md-2 col-sm-2">
                    <div class="box" id="opponent-row">
                        <div class="flip-container">
                            <div class="flipper" onclick="this.classList.toggle('flipped')">
                                <div class="front">
                                    <img src="{{this.frontImage}}" width="50" height="70">
                                </div>
                                <div class="back">
                                    <img src="{{this.opponentBackImage}}" width="50" height="70">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {{/each}}
        </div> <!-- /row #1 -->

        <!-- row #2 -->
        <div class="row">
            {{#each secondRow}}
                <div class="col-lg-2 col-md-2 col-sm-2">
                    <div class="box" id="opponent-row">
                        <div class="flip-container">
                            <div class="flipper" onclick="this.classList.toggle('flipped')">
                                <div class="front">
                                    <img src="{{this.frontImage}}" width="50" height="70">
                                </div>
                                <div class="back">
                                    <img src="{{this.opponentBackImage}}" width="50" height="70">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {{/each}}
        </div> <!-- /row #2 -->

        <!-- row #3 -->
        <div class="row">
            {{#each thirdRow}}
                <div class="col-lg-2 col-md-2 col-sm-2">
                    <div class="box" id="opponent-row">
                        <div class="flip-container">
                            <div class="flipper" onclick="this.classList.toggle('flipped')">
                                <div class="front">
                                    <img src="{{this.frontImage}}" width="50" height="70">
                                </div>
                                <div class="back">
                                    <img src="{{this.opponentBackImage}}" width="50" height="70">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {{/each}}
        </div> <!-- /row #3 -->
        
        <!-- display opponent's tile choice for testing     
        <div class="row panel-body">
        	<p class="text-center">
        		The opponent chose {{opponentTile.name}} (tile id {{opponentTile.id}})
        	</p>        
        </div>
		-->
	</div>
</template>


<!--*********************
		VIEW USERS
**********************-->

<template name="infoPanel">
	<div class="panel panel-default" id="infoPanel">
	  <div id="onlineUsers">
		<h3 class="text-center">Online Users</h3>
		  <ul id="usersList">
			<!-- Display a list of online users stored in the database -->
			{{#each onlineUsersList}}
				<li class="userItem"><i class="fa fa-user"></i>&nbsp;
                    <a class="userItem userDisplayName" id="{{this._id}}">{{username}}</a></li>
			{{/each}}
		  </ul>
		<br>
		
		<h3 class="text-center">Games</h3>
		<button class="btn btn-default newGameButton">Create New</button>
		  <ul id="gamesList">
			<!-- Display a list of games in progress or waiting for opponents -->
			{{#each gamesList}}
			  <li>{{player1}}, {{player2}}
			  {{#unless gameStarted}} <a href="#" class="joinGame" id="{{id}}">Join</a>
			  {{/unless}}</li>
			{{/each}}
		  </ul>
	  </div>
		  
	  <div id="userInfo">
		  <p><small><a id="backToUsers">Back</a></small></p>
		  <h3 class="userDisplayName">{{viewUsername}}</h3>
		  <p>Wins: {{viewUserWins}}<br>
		  Losses: {{viewUserLosses}}</p>
		  
	  </div>
	</div>
</template>


<!--*********************
	    HOME PAGE: /
**********************-->
<template name="home">
  <div class="container">
	{{> navigation}}
	
	<h1 class="nonlogin mainTitle"><br><br>
			  Welcome to Guess Who?<br>
			</h1>
  </div>
</template>

<!--***************************
	    LOGIN PAGE: /login
****************************-->

<template name="login">
  <div class="container">
	{{> navigation}}
	
	<h1 class="nonlogin mainTitle"><br><br>
			  Please sign up or<br>
			  log in to play<br>
              <br>Guess Who?
			</h1>
  </div>
</template>


<!--************************
	  GAME PAGE: /game
*************************-->

<template name="game">
  <div class="container">
	{{> navigation}}
	
	<div class="col-lg-9 col-md-9 col-sm-9">
			  <!-- Gameplay area -->
			  <div class="row">
				  {{> mainbox}}
			  </div>
			  
			  <!-- Chat with opponent -->
			  <div class="row">
				  {{> messageList}}
			  </div>
			  <div class="row">
				  {{> addMessageForm}}
			  </div>
		  </div>
        
		  <div class="col-lg-3 col-md-3 col-sm-3">
			  <!-- Opponent's tiles -->
			  <div class="row">
				  {{> opponentBoard }}
			  </div>
			  
			  <!-- Online users -->
			  <div class="row">
				  {{> infoPanel }}
			  </div>
		  </div>
  </div>
</template>


<!--************************************
    INSTRUCTIONS PAGE: /instructions
*************************************-->

<template name="instructions">
  <div class="container">
	{{> navigation}}
	
	<div class="panel panel-default" id="instructionsPanel">
	  <div class="col-xs-10 col-xs-offset-1">
	  <h3>Game Play</h3>
          <p><strong class="strong">Objective of Game: </strong>Your objective is to guess the Mystery Person on your opponent's board.
          This is achieved by asking one question per turn, and eliminating any gameboard faces that don't fit the
          Mystery Person's description.</p>
	  <ul>
        <li><strong class="strong">Gameboard Faces: </strong>Notice there are 15 faces on the gameboard. They all have differences; notice
            these differences. Eye Color, Hair Color, Rosey Cheeks, Facial Hair, Big Noses... As you play, you will
            notice several other differences about the gameboard faces.</li><br>
		<li><strong class="strong">Your Turn: </strong>The younger player always goes first. On your turn, you may either ask a question or make a guess
            at who the Mystery Person is. But don't use your turn to guess the Mystery Person until you're ready. If
            your guess is wrong you'll lose the game!</li><br>
		<li><strong class="strong">Asking Questions: </strong>Until you're ready to guess who the Mystery Person is, ask your opponent one question
            per turn. Each question must have either a "yes" or "no" answer. For example, you may ask "Does your
            person have white hair?" Your opponent must then answer either "yes" or "no" <br> After your opponent
            answers, you may be able to elimate one or more gameboard faces. For example, if the Mystery Person has
            white hair, flip down all the faces that have black, brown, red, and blonde hair. This leaves only the
            white haired people as the possible Mystery Person. <br> After you ask a question (and flip down any faces
            you can), your turn is over.</li><br>
        <li><strong class="strong">Guessing the Mystery Person: </strong>When you're ready to guess who the Mystery Person is, make your guess on
            your turn, instead of asking a question. To guess the Mystery Person, flip over all the tiles except the one you think
			is correct. If your guess is right, you win the Game! If it's wrong, you lose!</li><br>
        <li><strong class="strong">How to Win: </strong>Players alternate turns asking questions until one player makes a guess. If you make a correct
            guess or your opponent guesses incorrectly - you win the game!</li>
	  </ul>
	  </div>
	</div>	
  </div>
</template>

<!--************************************
    HIGH SCORES PAGE: /highscores
*************************************-->

<template name="highScores">
  <div class="container">
	{{> navigation}}
	
	<div class="panel panel-default" id="highScoresPanel">
	  <div class="col-xs-10 col-xs-offset-1">
	  <h3>High Scores</h3>
          <table class="w3-table w3-striped w3-bordered w3-card-4">
              <thead>
              <tr class="w3-blue">
                  <th>Username</th>
                  <th><span class="pull-right"><strong>Wins</strong> / Losses</span></th>
              </tr>
              </thead>

		{{#each highScoresUsers}}
        <tr>
		 <td><i class="fa fa-user"></i> {{username}}</td>
		  <td><span class="pull-right"><strong>{{profile.wins}}</strong> / {{profile.losses}}</span></td>

		</tr>
		{{/each}}
	  </table>
	  </div>
	</div>	
  </div>
</template>